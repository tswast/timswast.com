<!DOCTYPE html>
<meta charset="UTF-8">
<meta name="viewport" content="initial-scale=1">
<title>Gravity v0.1 released</title>
<link rel="stylesheet" type="text/css" href="../../../../../css/blog.css" />

<article class="h-entry">
<div id="content-header">
  <h1 class="p-name">Gravity v0.1 released.</h1>
  <a href="/" rel="author" class="p-author h-card"><img
  src="/img/profile.png" class="u-photo pixel-art icon"> Tim Swast</a> on
  <time class="dt-published post-date"
  datetime="2011-11-21">Wednesday, November 21, 2011</time>
</div>

<div class="entry e-content">
<p class="p-summary">I just put a new version of Gravity (beta) on <a
href="http://www.kongregate.com/games/TimSwast/gravity-beta">Kongregate</a>.
I added support for multiple masses and also obstacles. Also, I fixed a
bug with the physics system. The physics are much more
&#8220;realistic&#8221; now. Force actually decreases with distance now!</p>

<h2>Lessons Learned</h2>

<p>When I added support for multiple masses, I noticed that the physics were
acting &#8220;funny&#8221;. It seemed like the little boxes were being more
attracted by masses on the opposite side of the map than the to ones they
were near.</p>

<p>It turns out that AS3 does not have an exponentiation operator. My late
night coding resulted in the following mistake.</p>

<pre><code>
<em>// I don't think I ordered an XOR.</em>
<b>var</b> dist:Number = Math.sqrt(
        (massPt.x - object.x) ^ 2 +
        (massPt.y - object.y) ^ 2);

<em>// this is what I should have said.</em>
<b>var</b> dist:Number = Math.sqrt(
        Math.pow(massPt.x - object.x, 2) +
        Math.pow(massPt.y - object.y, 2));
</code></pre>

<p>Also, it turns out that <a href="http://flixel.org/">Flixel</a> makes the
nice memory-saving optimization of reusing graphics of the same size when you
do <code>makeGraphic()</code>. I had to tell it to make a unique version so
that I could change the background color on my buttons for add / remove.</p>

<footer>
  Copyright 2011. Released under <a
  href="https://creativecommons.org/licenses/by/4.0/">Creative Commons
  Attribution License</a>.
</footer>
</article>
